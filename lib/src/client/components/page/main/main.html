<polymer-element name="x-main">
  <template>
    <link rel="stylesheet" href="main.css">
    <div class="content" layout vertical>
      <core-animated-pages id="pages" selected="{{app.router.selectedPage}}" valueattr="data-page" fit>
        <section data-page="lobby">
          <template if="{{app.community != null && app.router.selectedPage == 'lobby'}}">
            <chat-view app="{{app}}" viewModel="{{app.mainViewModel.chatViewModel}}"></chat-view>
          </template>
        </section>
        <section data-page="channels" layout vertical>
          <template if="{{app.community == null && app.router.selectedPage == 'channels'}}">
            <div>
              <community-list id="community-list" app="{{app}}" viewModel="{{app.mainViewModel}}"></community-list>
            </div>
          </template>
        </section>
        <section data-page="item" layout vertical>
          <template if="{{app.router.selectedPage == 'item'}}">
            <div class="page-wrapper">
              <item-view id="item-view" app="{{app}}" viewModel="{{app.mainViewModel.itemViewModel}}"></item-view>
              <item-activities app="{{app}}"></item-activities>
            </div>
          </template>
        </section>
        <section data-page="people" layout vertical>
          <template if="{{app.router.selectedPage == 'people'}}">
            <people-list app="{{app}}" viewModel="{{app.mainViewModel.peopleViewModel}}"></people-list>
          </template>
        </section>
        <section data-page="events">
          <template if="{{app.community != null && app.router.selectedPage == 'events'}}">
            <inbox-list id="inbox-list" app="{{app}}" viewModel="{{app.mainViewModel.eventViewModel}}"></inbox-list>
          </template>
        </section>
        <section data-page="news">
          <template if="{{app.community != null && app.router.selectedPage == 'news'}}">
            <inbox-list id="inbox-list" app="{{app}}" viewModel="{{app.mainViewModel.newsViewModel}}"></inbox-list>
          </template>
        </section>
      </core-animated-pages>
    </div>


    <!--<core-drawer-panel responsiveWidth="{{responsiveWidth}}" class="{{(app.user.settings['theme'] == 'dark') ? 'theme-dark' : ''}}">-->

      <!--<div vertical layout drawer>-->
        <!--&lt;!&ndash;<core-header-panel id="side-panel" navigation flex mode="seamed">&ndash;&gt;-->
          <!--&lt;!&ndash;<div id="toolbar-drawer" class="toolbar {{app.community == null ? 'has-logo' : ''}}">&ndash;&gt;-->
                  <!--&lt;!&ndash;<span id="sidebar-title" class="{{app.community == null ? 'has-logo' : ''}} flashing-fix"&ndash;&gt;-->
                        <!--&lt;!&ndash;data-page="lobby" data-url="/{{app.community.alias}}" on-tap="{{switchPage}}">&ndash;&gt;-->
                    <!--&lt;!&ndash;<template if="{{app.community == null}}">&ndash;&gt;-->
                      <!--&lt;!&ndash;<img id="woven-logo" _src="{{app.cloudStoragePath}}/public/images/app/woven-logo-small.png">&ndash;&gt;-->
                    <!--&lt;!&ndash;</template>&ndash;&gt;-->
                    <!--&lt;!&ndash;<template if="{{app.community != null}}">&ndash;&gt;-->
                      <!--&lt;!&ndash;{{app.community.name}}&ndash;&gt;-->
                    <!--&lt;!&ndash;</template>&ndash;&gt;-->
                  <!--&lt;!&ndash;</span>&ndash;&gt;-->
          <!--&lt;!&ndash;</div>&ndash;&gt;-->

          <!--&lt;!&ndash;<core-menu valueattr="data-page" selected="{{app.router.selectedPage}}" class="menu">&ndash;&gt;-->
            <!--&lt;!&ndash;<template if="{{app.community != null}}">&ndash;&gt;-->
              <!--&lt;!&ndash;<core-item label="Lobby" icon="communication:forum" horizontal center layout class="item"&ndash;&gt;-->
                         <!--&lt;!&ndash;on-tap="{{switchPage}}" data-page="lobby" data-url="/{{app.community.alias}}"></core-item>&ndash;&gt;-->
              <!--&lt;!&ndash;<core-item hidden label="Feed" icon="view-stream" horizontal center layout class="item"&ndash;&gt;-->
                         <!--&lt;!&ndash;on-tap="{{switchPage}}" data-page="feed" data-url="/{{app.community.alias}}/feed"></core-item>&ndash;&gt;-->
              <!--&lt;!&ndash;<core-item label="News" icon="custom-icons-fix:news" horizontal center layout class="item"&ndash;&gt;-->
                         <!--&lt;!&ndash;on-tap="{{switchPage}}" data-page="news" data-url="/{{app.community.alias}}/news"></core-item>&ndash;&gt;-->
              <!--&lt;!&ndash;<core-item label="Events" icon="event" horizontal center layout class="item last"&ndash;&gt;-->
                         <!--&lt;!&ndash;on-tap="{{switchPage}}" data-page="events" data-url="/{{app.community.alias}}/events"></core-item>&ndash;&gt;-->
              <!--&lt;!&ndash;&lt;!&ndash;<core-item label="People" icon="account-circle" horizontal center layout class="item last"&ndash;&gt;&ndash;&gt;-->
              <!--&lt;!&ndash;&lt;!&ndash;on-tap="{{switchPage}}" data-page="people" data-url="/{{app.community.alias}}/people"></core-item>&ndash;&gt;&ndash;&gt;-->
              <!--&lt;!&ndash;&lt;!&ndash;<core-item label="Saved" icon="star" horizontal center layout class="item"&ndash;&gt;&ndash;&gt;-->
              <!--&lt;!&ndash;&lt;!&ndash;on-tap="{{switchPage}}" data-page="2" data-url="/saved" ></core-item>&ndash;&gt;&ndash;&gt;-->
              <!--&lt;!&ndash;<core-item label="Channels" icon="chevron-left" horizontal center layout class="item channels last" active&ndash;&gt;-->
                         <!--&lt;!&ndash;on-tap="{{switchPage}}" data-page="channels" data-url="/" ></core-item>&ndash;&gt;-->

            <!--&lt;!&ndash;</template>&ndash;&gt;-->
            <!--&lt;!&ndash;<template if="{{app.community == null}}">&ndash;&gt;-->
              <!--&lt;!&ndash;<core-item label="Channels" icon="custom-icons:communities" horizontal center layout class="item" active&ndash;&gt;-->
                         <!--&lt;!&ndash;on-tap="{{switchPage}}" data-page="channels" data-url="/" ></core-item>&ndash;&gt;-->
              <!--&lt;!&ndash;<core-item label="People" icon="account-circle" horizontal center layout class="item last"&ndash;&gt;-->
                         <!--&lt;!&ndash;on-tap="{{switchPage}}" data-page="people" data-url="/people"></core-item>&ndash;&gt;-->
              <!--&lt;!&ndash;&lt;!&ndash;<core-item label="Saved" icon="star" horizontal center layout class="item"&ndash;&gt;&ndash;&gt;-->
              <!--&lt;!&ndash;&lt;!&ndash;on-tap="{{switchPage}}" data-page="2" data-url="/saved" ></core-item>&ndash;&gt;&ndash;&gt;-->
              <!--&lt;!&ndash;&lt;!&ndash;<core-item label="About Woven" icon="drive-ms-word" horizontal center layout class="item"&ndash;&gt;&ndash;&gt;-->
              <!--&lt;!&ndash;&lt;!&ndash;on-tap="{{switchPage}}" data-page="3" data-url="/people"></core-item>&ndash;&gt;&ndash;&gt;-->
            <!--&lt;!&ndash;</template>&ndash;&gt;-->
          <!--&lt;!&ndash;</core-menu>&ndash;&gt;-->
          <!--&lt;!&ndash;<div id="bottom-area" self-stretch>&ndash;&gt;-->
            <!--&lt;!&ndash;<template if="{{app.user == null}}">&ndash;&gt;-->
              <!--&lt;!&ndash;<div id="button-area">&ndash;&gt;-->
                <!--&lt;!&ndash;<button class="button-sign-in" id="button-sign-in" on-tap="{{toggleSignIn}}">Sign in</button>&ndash;&gt;-->
              <!--&lt;!&ndash;</div>&ndash;&gt;-->
            <!--&lt;!&ndash;</template>&ndash;&gt;-->
            <!--&lt;!&ndash;<template if="{{app.user != null}}">&ndash;&gt;-->
              <!--&lt;!&ndash;<div id="user-area" layout horizontal>&ndash;&gt;-->
                <!--&lt;!&ndash;<div class="user-area-photo"><user-picture app="{{app}}" username="{{app.user.username.toLowerCase()}}"></user-picture></div>&ndash;&gt;-->
                <!--&lt;!&ndash;<div class="user-area-text" flex start-justified layout vertical>&ndash;&gt;-->
                  <!--&lt;!&ndash;<div>Hello, {{app.user.username}}!</div>&ndash;&gt;-->
                  <!--&lt;!&ndash;<div class="sub-links">&ndash;&gt;-->
                    <!--&lt;!&ndash;<span on-tap="{{signOut}}">Sign out</span>&ndash;&gt;-->
                  <!--&lt;!&ndash;</div>&ndash;&gt;-->
                <!--&lt;!&ndash;</div>&ndash;&gt;-->
              <!--&lt;!&ndash;</div>&ndash;&gt;-->
            <!--&lt;!&ndash;</template>&ndash;&gt;-->
          <!--&lt;!&ndash;</div>&ndash;&gt;-->
        <!--&lt;!&ndash;</core-header-panel>&ndash;&gt;-->
      <!--</div>-->

      <!--<core-scroll-header-panel id="main-panel" main>-->
        <!--<core-toolbar id="toolbar-main">-->
          <!--<template if="{{app.router.selectedPage != 'item' || (app.router.previousPage != 'feed' && app.router.previousPage != 'events' && app.router.previousPage != 'lobby')}}">-->
            <!--<core-icon-button class="btn flashing-fix" id="menu-button" icon="menu" on-tap="{{togglePanel}}"></core-icon-button>-->
          <!--</template>-->
          <!--<template if="{{app.router.selectedPage == 'item' && (app.router.previousPage == 'feed' || app.router.previousPage == 'events' || app.router.previousPage == 'lobby')}}">-->
            <!--<core-icon-button class="btn flashing-fix" id="back-button" icon="arrow-back" on-tap="{{goBack}}"></core-icon-button>-->
          <!--</template>-->
          <!--<span id="page-title" flex on-tap="{{scrollToTop}}"></span>-->
          <!--<core-tooltip label="Add stuff" position="left">-->
            <!--<core-icon-button class="btn primary flashing-fix" id="add-button" icon="add-circle" on-tap="{{toggleAddStuff}}"></core-icon-button>-->
          <!--</core-tooltip>-->
        <!--</core-toolbar>-->

        <!--<div class="content" layout vertical>-->
          <!--<core-animated-pages id="pages" selected="{{app.router.selectedPage}}" valueattr="data-page" fit>-->
            <!--<section data-page="lobby">-->
              <!--<template if="{{app.community != null && app.router.selectedPage == 'lobby'}}">-->
                <!--<chat-view app="{{app}}" viewModel="{{app.mainViewModel.chatViewModel}}"></chat-view>-->
              <!--</template>-->
            <!--</section>-->
            <!--<section data-page="channels" layout vertical>-->
              <!--<template if="{{app.community == null && app.router.selectedPage == 'channels'}}">-->
                <!--<div>-->
                  <!--<community-list id="community-list" app="{{app}}" viewModel="{{app.mainViewModel}}"></community-list>-->
                <!--</div>-->
              <!--</template>-->
            <!--</section>-->
            <!--<section data-page="item" layout vertical>-->
              <!--<template if="{{app.router.selectedPage == 'item'}}">-->
                <!--<div class="page-wrapper">-->
                  <!--<item-view id="item-view" app="{{app}}" viewModel="{{app.mainViewModel.itemViewModel}}"></item-view>-->
                  <!--<item-activities app="{{app}}"></item-activities>-->
                <!--</div>-->
              <!--</template>-->
            <!--</section>-->
            <!--<section data-page="people" layout vertical>-->
              <!--<template if="{{app.router.selectedPage == 'people'}}">-->
                <!--<people-list app="{{app}}" viewModel="{{app.mainViewModel.peopleViewModel}}"></people-list>-->
              <!--</template>-->
            <!--</section>-->
            <!--<section data-page="events">-->
              <!--<template if="{{app.community != null && app.router.selectedPage == 'events'}}">-->
                <!--<inbox-list id="inbox-list" app="{{app}}" viewModel="{{app.mainViewModel.eventViewModel}}"></inbox-list>-->
              <!--</template>-->
            <!--</section>-->
            <!--<section data-page="news">-->
              <!--<template if="{{app.community != null && app.router.selectedPage == 'news'}}">-->
                <!--<inbox-list id="inbox-list" app="{{app}}" viewModel="{{app.mainViewModel.newsViewModel}}"></inbox-list>-->
              <!--</template>-->
            <!--</section>-->
          <!--</core-animated-pages>-->
        <!--</div>-->
      <!--</core-scroll-header-panel>-->

    <!--</core-drawer-panel>-->

    <template if="{{app.user != null}}"><add-stuff app="{{app}}"></add-stuff></template>
    <template if="{{app.hasTriedLoadingUser && app.user == null}}"><sign-in-dialog app="{{app}}"></sign-in-dialog></template>

    <!--<template if="{{app.user == null}}">-->
    <!--<sign-in app="{{app}}"></sign-in>-->
    <!--<core-overlay id="sign-in-overlay" class="sign-in-overlay" layered backdrop opened="false" transition="core-transition-center">-->
    <!--<span id="message">Please sign in to comment.</span>-->
    <!--<button class="signin-btn" id="facebook-signin" on-tap="{{signInWithFacebook}}">Sign in with Facebook</button>-->
    <!--</core-overlay>-->
    <!--</template>-->
    <paper-toast id="toast-message" duration="4000"></paper-toast>
    <!--<welcome-dialog app="{{app}}"-->
    <!--opened="{{(app.user != null && (app.user.disabled || app.user.needsPassword))}}">-->
    <!--</welcome-dialog>-->
  </template>
  <script type="application/dart" src="main.dart"></script>
</polymer-element>