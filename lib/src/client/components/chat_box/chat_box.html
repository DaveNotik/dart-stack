<link rel="import" href="../../../../../../packages/polymer/polymer.html">
<link rel="import" href="../../../../../../packages/core_elements/core_field.html">
<link rel="import" href="../../../../../../packages/core_elements/core_icon_button.html">
<link rel="import" href="../../../../../../packages/core_elements/core_a11y_keys.html">
<link rel="import" href="../../../../../../packages/core_elements/core_tooltip.html">
<link rel="import" href="../../../../../../packages/paper_elements/paper_autogrow_textarea.html">
<link rel="import" href="../user_picture/user_picture.html">

<polymer-element name="chat-box">
  <template>
    <link rel="stylesheet" href="chat_box.css">
    <div id="post-container">
      <template if="{{app.user != null}}">
        <div layout horizontal>
          <div class="user-area" vertical layout>
            <user-picture app="{{app}}" user="{{app.user.username}}"></user-picture>
          </div>
          <div vertical layout flex>
            <div class="field-wrapper full-height">
              <paper-autogrow-textarea
                  maxRows="7"
                  id="comment"
                  on-focus="{{onFocusHandler}}"
                  on-blur="{{onBlurHandler}}"
                  on-tap="{{onFocusHandler}}"
                  autocomplete="off">
                <textarea id="comment-textarea" placeholder="Say something..." type="submit"></textarea>
              </paper-autogrow-textarea>
            </div>
            <!--<div id="footer">-->
            <!--<core-tooltip label="Tab + Enter" position="left" tabindex="-1">-->
            <!--<core-icon-button id="comment-send-button" class="btn action" icon="send" on-tap="{{addComment}}" tabindex="0"></core-icon-button>-->
            <!--</core-tooltip>-->
            <!--</div>-->
            <core-a11y-keys id="a11y-send" keys="enter ctrl+enter" on-keys-pressed="{{addComment}}"></core-a11y-keys>
          </div>
        </div>
      </template>
      <template if="{{app.user == null}}">
        <div id="signin-container">
          <span id="message">Please sign in to participate.</span>
          <button class="signin-btn" id="facebook-signin" on-click="{{signInWithFacebook}}">Sign in with Facebook</button>
        </div>
      </template>
    </div>
  </template>
  <script type="application/dart" src="chat_box.dart"></script>
</polymer-element>
