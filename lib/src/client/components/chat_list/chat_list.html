<link rel="import" href="../../../../../../packages/polymer/polymer.html">
<link rel="import" href="../widgets/live_date_time/live_date_time.html">
<link rel="import" href="../widgets/safe_html/safe_html.html">
<link rel="import" href="../user_picture/user_picture.html">
<polymer-element name="chat-list">
  <template>
    <link rel="stylesheet" href="chat_list.css">
    <div id="activity-wrapper">
      <template if="{{viewModel.messages != null}}" repeat="{{message in viewModel.messages}}">
        <div layout horizontal>
          <div class="user-area" vertical layout>
            <user-picture app="{{app}}" user="{{message['user']}}"></user-picture>
          </div>
          <div class="activity-card" flex>
            <div id="content">
              <div class="card-top" horizontal layout>
                <div flex class="user">{{message['user']}}</div>
                <div class="date-time">
                  <live-date-time value="{{message['createdDate']}}" formatter="{{formatItemDate}}"></live-date-time>
                </div>
              </div>
              <p><safe-html><template if="{{message != null}}">{{formatText(message['message'])}}</template></safe-html></p>
            </div>
          </div>
        </div>
      </template>
    </div>
  </template>
  <script type="application/dart" src="chat_list.dart"></script>
</polymer-element>
