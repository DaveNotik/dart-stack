<link rel="import" href="../../../../../../packages/polymer/polymer.html">
<link rel="import" href="../../../../../../packages/core_elements/core_item.html">
<link rel="import" href="../../../../../../packages/core_elements/core_icon.html">
<link rel="import" href="../widgets/live_date_time/live_date_time.html">
<polymer-element name="inbox-list">
  <template>
    <link rel="stylesheet" href="inbox_list.css">
    <div id="content-container">
    <template if="{{app.community.alias == 'iiipoints'}}">
      <core-item class="item cta">
        <div class="cta-container" vertical layout>
          <div class="cta-col1">
            <img src="/static/images/iiipoints_header.png">
          </div>
        </div>
      </core-item>
    </template>
    <template repeat="{{item in viewModel.inboxViewModel.items}}">
      <core-item class="item" on-click="{{selectItem}}" data-id="{{item['id']}}">
        <div class="item-container" horizontal layout>
          <div class="item-col1" vertical layout>
            <core-icon icon="{{app.user != null && item['liked'] == true ? 'favorite' : 'favorite-outline'}}"
                       id="icon-fav" on-click="{{toggleLike}}"
                       class="{{app.user != null && item['liked'] == true ? 'selected' : ''}}"
                       data-id="{{item['id']}}"></core-icon>
            <span class="item-count">{{item['like_count']}}</span>
            <core-icon icon="{{app.user != null && item['starred'] == true ? 'star' : 'star-outline'}}"
                       id="icon-star" on-click="{{toggleStar}}"
                       class="{{app.user != null && item['starred'] == true ? 'selected' : ''}}"
                       data-id="{{item['id']}}"></core-icon>
            <span class="item-count">{{item['star_count']}}</span>
          </div>
          <div class="item-col2" flex>
            <div class="item-type">{{(item['type'] != null) ? item['type'] : 'other'}}</div>
            <div class="item-subject">{{item['subject']}}</div>
            <div class="item-body" flex><div class="event-date"><live-date-time value="{{item['startDateTime']}}" formatter="{{formatEventDate}}"></live-date-time></div> {{item['body']}}</div>
          </div>
          <div class="item-col3">
            <div class="item-users">{{item['user']}}</div>
            <div class="item-updated">
            <live-date-time value="{{item['updatedDate']}}" formatter="{{formatItemDate}}"></live-date-time>
            </div>
          </div>
        </div>
      </core-item>
    </template>
    </div>
  </template>
  <script type="application/dart" src="inbox_list.dart"></script>
</polymer-element>
