<link rel="import" href="../../../../../../packages/polymer/polymer.html">
<link rel="import" href="../../../../../../packages/core_elements/core_field.html">
<link rel="import" href="../../../../../../packages/core_elements/core_input.html">
<link rel="import" href="../../../../../../packages/core_elements/core_icon_button.html">
<link rel="import" href="../widgets/live_date_time/live_date_time.html">
<polymer-element name="item-activities">
  <template>
    <link rel="stylesheet" href="item_activities.css">
    <div id="post-container">
      <div class="field-wrapper first">
        <core-input id="name" placeholder="Your name" autocomplete="off"
                    value="{{(app.user != null) ? app.user.username : ''}}"
                    disabled="{{(app.user != null) ? true : false}}"></core-input>
      </div>
      <div class="field-wrapper full-height">
        <core-input class="expand" id="comment" multiline rows="3" required placeholder="Your comment..." autocomplete="off"></core-input>
      </div>
      <footer>
        <core-icon-button class="btn action" icon="send" on-tap="{{addComment}}"></core-icon-button>
      </footer>
    </div>

    <template if="{{app.selectedItem != null && comments != null}}" repeat="{{comment in comments}}">
      <div class="activity-card">
        <div id="content">
          <div class="user">{{comment['user']}}</div>
          <p>{{comment['comment']}}</p>
          <div class="date-time">
            <live-date-time value="{{comment['createdDate']}}" formatter="{{formatItemDate}}"></live-date-time>
          </div>
        </div>
      </div>
    </template>
  </template>
  <script type="application/dart" src="item_activities.dart"></script>
</polymer-element>
