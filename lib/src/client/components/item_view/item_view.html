<link rel="import" href="../../../../../../packages/polymer/polymer.html">
<link rel="import" href="../widgets/live_date_time/live_date_time.html">
<link rel="import" href="../../../../../../packages/core_elements/core_icon_button.html">
<link rel="import" href="../widgets/safe_html/safe_html.html">
<link rel="import" href="../widgets/uri_preview/uri_preview.html">
<polymer-element name="item-view">
  <template>
    <link rel="stylesheet" href="item_view.css">
      <template if="{{item != null}}">
        <div class="item-card">
          <div class="content">
            <div class="content-header">
              <div class="item-type {{(item['type'] != null) ? item['type'] : 'other'}}">{{(item['type'] != null) ? item['type'] : 'other'}}</div>
              <div>
                <h1>{{item['subject']}}</h1>
              </div>
              <template if="{{app.selectedItem != null}}">
                <div class="item-updated">
                  <live-date-time value="{{item['createdDate']}}" formatter="{{formatItemDate}}"></live-date-time>
                  by
                  <span class="item-users">{{item['user']}}</span>
                </div>
              </template>
            </div>
            <template if="{{item['startDateTime'] != null || item['url'] != null}}">
              <div class="content-info">
                    <template if="{{item['startDateTime'] != null}}">
                      <div class="event-date"><live-date-time value="{{item['startDateTime']}}" formatter="{{formatEventDate}}"></live-date-time></div>
                    </template>
                    <template if="{{item['url'] != null}}">
                      <div class="item-url"><a target="_blank" _href="{{item['url']}}">{{item['url']}}</a></div>
                    </template>
              </div>
            </template>
            <div class="content-main">
              <div>
                <p id="body" class="{{(item['id'] == '-JYMa-efNz4EFIXU61Zf') ? 'special' : ''}}"><safe-html>Loading...</safe-html></p>
              </div>
              <template if="{{item['uriPreviewId'] != null}}">
                <uri-preview id="{{item['uriPreviewId']}}"></uri-preview>
              </template>
            </div>
          </div>
          <div id="content-footer">
            <div class="item-col1" horizontal layout>
              <core-icon-button icon="{{app.user != null && item['liked'] == true ? 'favorite' : 'favorite-outline'}}"
                         id="icon-fav" on-click="{{toggleLike}}"
                         class="like-button {{app.user != null && item['liked'] == true ? 'selected' : ''}}"
                         data-id="{{item['id']}}"><span class="item-count">{{item['like_count']}}</span>
                <!--<span class="button-text">{{app.user != null && item['liked'] == true ? 'Liked' : 'Like'}}</span>-->
              </core-icon-button>
            </div>
          </div>
        </div>
      </template>
  </template>
  <script type="application/dart" src="item_view.dart"></script>
</polymer-element>
